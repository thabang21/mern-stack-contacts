(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{35:function(e,t,a){e.exports=a(64)},40:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),o=(a(40),a(10)),s=a(14),u=Object(n.createContext)(),i=Object(n.createContext)(),p=function(e){e.title,e.icon;var t=Object(n.useContext)(u),a=t.user,c=t.logout,l=t.isAuthencated,s=t.clearErrors,p=Object(n.useContext)(i).clearGuests,m=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,"Hello, ",a&&a.name),r.a.createElement("span",{className:"sm-hide"},"|"),r.a.createElement("li",null,r.a.createElement("a",{href:"#!",onClick:function(){c(),p(),s()}},r.a.createElement("span",{className:"sm-hide"},"Logout")," ",r.a.createElement("i",{className:"fas fa-sign-out-alt"})))),E=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/register"},"Register")),r.a.createElement("span",{className:"sm-hide"},"|"),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login")));return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"logo"},r.a.createElement("h1",null,"CONTACTS BOOK "),r.a.createElement("p",null,"Consider your contacts saved ",r.a.createElement("span",null,"\u2764"))),r.a.createElement("ul",null,l?m:E))};p.defaultProps={title:"Party RSVP",icon:"fas fa-glass-cheers"};var m=p,E=a(4),d=a(11);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var g=function(){var e=Object(n.useContext)(i),t=e.addGuest,a=e.editGuest,c=e.clearEdit,l=e.update_Guest;Object(n.useEffect)(function(){p(null!==a?a:{name:"",phone:"",diet:"family"})},[a,e]);var o=Object(n.useState)({name:"",phone:"",diet:"family"}),s=Object(d.a)(o,2),u=s[0],p=s[1],m=u.name,g=u.phone,b=u.diet,h=function(e){p(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},u,Object(E.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"invite-section"},r.a.createElement("h1",null,null!==a?"Edit contact":"Create Contact"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null===a?t(u):(l(u),c()),p({name:"",phone:"",diet:"family"})}},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:m,onChange:h,required:!0}),r.a.createElement("input",{type:"text",placeholder:"Phone",name:"phone",value:g,onChange:h,required:!0}),r.a.createElement("p",{className:"options-label"},"Contact Type"),r.a.createElement("div",{className:"options"},r.a.createElement("label",{class:"container"},"family",r.a.createElement("input",{type:"radio",name:"diet",value:"family",onChange:h,checked:"family"===b}),r.a.createElement("span",{class:"checkmark"})),r.a.createElement("label",{class:"container"},"Friends",r.a.createElement("input",{type:"radio",name:"diet",value:"Friends",onChange:h,checked:"Friends"===b}),r.a.createElement("span",{class:"checkmark"})),r.a.createElement("label",{class:"container"},"Work",r.a.createElement("input",{type:"radio",name:"diet",value:"Work",onChange:h,checked:"Work"===b}),r.a.createElement("span",{class:"checkmark"}))),r.a.createElement("input",{type:"submit",value:null!==a?"Update Contact":"Add Contact",className:"btn"}),null!==a?r.a.createElement("input",{onClick:c,type:"button",className:"btn clear",value:"Cancel"}):null))},b=function(){var e=Object(n.useContext)(i).toggleGuestFilter;return r.a.createElement("div",{className:"toggle"},r.a.createElement("label",{class:"switch"},r.a.createElement("input",{type:"checkbox",onChange:function(){return e()}}),r.a.createElement("span",{class:"slider round"})),r.a.createElement("p",{className:"lead"},"Show favourite Contacts!"))},h=function(){var e=Object(n.useContext)(i),t=e.search_Guest,a=e.clearSearchGuest,c=Object(n.useRef)("");return r.a.createElement("div",null,r.a.createElement("input",{ref:c,onChange:function(e){""!==c.current.value?t(e.target.value):a()},type:"text",placeholder:"Search Contact by name...",className:"search"}),r.a.createElement("i",{className:"fas fa-search search-icon"}))},O=function(){var e=Object(n.useContext)(i).guests,t=function(t){return{total:e.filter(function(e){return e.diet===t}).length}};return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"contact type "),r.a.createElement("th",null," Saved")),r.a.createElement("tr",null,r.a.createElement("th",null,"family"),r.a.createElement("td",null,t("family").total)),r.a.createElement("tr",null,r.a.createElement("th",null,"Friends"),r.a.createElement("td",null,t("Friends").total)),r.a.createElement("tr",null,r.a.createElement("th",null,"Work"),r.a.createElement("td",null,t("Work").total)),r.a.createElement("tr",null,r.a.createElement("th",null,"Total"),r.a.createElement("td",null,e.length)))))},y=a(67),v=a(66);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var S=function(e){var t=e.guest,a=Object(n.useContext)(i),c=a.removeGuest,l=a.edit_Guest,o=a.clearEdit,s=a.update_Guest,u=t._id,p=t.name,m=t.phone,d=t.diet,f=t.isconfirmed;return r.a.createElement("div",{class:"guest-card"},r.a.createElement("div",{class:"card-head"},r.a.createElement("div",null,r.a.createElement("label",{className:"".concat(f&&"confirm")},"Mark as favourite",r.a.createElement("i",{className:"fas fa-check-square ".concat(f&&"confirm")},r.a.createElement("input",{type:"checkbox",onChange:function(){s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{isconfirmed:!f}))}})," "))),r.a.createElement("div",null,r.a.createElement("button",{title:"Edit Contact"},r.a.createElement("i",{class:"fas fa-user-edit",onClick:function(){return l(t)}})),r.a.createElement("button",{onClick:function(){c(u),o()},title:"Remove Contact"},r.a.createElement("i",{class:"fas fa-trash-alt remove"})))),r.a.createElement("div",{class:"card-body"},r.a.createElement("h2",null,p),r.a.createElement("span",{class:"badge "+("Friends"===d?"green":"family"===d?"red":"seaGreen")},d),r.a.createElement("div",{class:"contact"},r.a.createElement("i",{class:"fas fa-phone-alt"}),r.a.createElement("p",null,m))))},w=function(){var e=Object(n.useContext)(i),t=Object(n.useContext)(u).loading,a=e.guests,c=e.guestFilter,l=e.searchGuest,o=e.getGuests;return Object(n.useEffect)(function(){o()},[]),null===a||0===a.length?r.a.createElement("h3",{className:"no-guest"},t?"Loading ...":"Please add a contact"):r.a.createElement("div",null,r.a.createElement(y.a,{className:"guests"},null!==l?l.map(function(e){return r.a.createElement(v.a,{key:e._id,timeout:300,classNames:"item"},r.a.createElement(S,{guest:e}))}):a.filter(function(e){return!c||e.isconfirmed}).map(function(e){return r.a.createElement(v.a,{key:e._id,timeout:300,classNames:"item"},r.a.createElement(S,{guest:e}))})))},C=function(){var e=Object(n.useContext)(u).loadUser;return Object(n.useEffect)(function(){e()},[]),r.a.createElement("div",{className:"app-container"},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"filter"},r.a.createElement(b,null),r.a.createElement(h,null)),r.a.createElement(g,null),r.a.createElement(O,null)),r.a.createElement(w,null))};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var k=function(e){var t=Object(n.useContext)(u),a=t.register,c=t.isAuthencated,l=t.error,s=t.clearErrors,i=t.setError;Object(n.useEffect)(function(){c&&e.history.push("/")},[c,e.history]);var p=Object(n.useState)({name:"",email:"",password:"",password2:""}),m=Object(d.a)(p,2),f=m[0],g=m[1],b=f.name,h=f.email,O=f.password,y=f.password2;return onchange=function(e){g(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},f,Object(E.a)({},e.target.name,e.target.value))),null!==l&&s()},onsubmit=function(e){e.preventDefault(),O!==y?i("Password does not match"):a({name:b,email:h,password:O})},r.a.createElement("div",{className:"register"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",null,r.a.createElement("input",{type:"text",name:"name",placeholder:"Name",value:b,onChange:onchange}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:h,onChange:onchange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:O,onChange:onchange}),r.a.createElement("input",{type:"password",name:"password2",placeholder:"Confirm Password",value:y,onChange:onchange,required:!0}),r.a.createElement("input",{type:"submit",value:"Sing Up",className:"btn"})),r.a.createElement("div",{className:"question"},null!==l&&l.map(function(e){return r.a.createElement("button",{className:"danger",type:"button"},e.msg," ",r.a.createElement("span",{onClick:function(){return s()}},"X"))}),r.a.createElement("p",null,"Already have an accout? "," "," ",r.a.createElement(o.b,{to:"/login"},"Sign In "))))};function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var P=function(e){var t=Object(n.useContext)(u),a=t.login,c=t.isAuthencated,l=t.error,s=t.clearErrors;Object(n.useEffect)(function(){c?(e.history.push("/"),s()):s()},[c,e.history]);var i=Object(n.useState)({email:"",password:""}),p=Object(d.a)(i,2),m=p[0],f=p[1],g=m.email,b=m.password,h=function(e){f(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},m,Object(E.a)({},e.target.name,e.target.value))),null!==l&&s()};return r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a({email:g,password:b}),s()}},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:g,onChange:h}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:b,onChange:h,required:!0}),r.a.createElement("input",{type:"submit",value:"Login",className:"btn"})),r.a.createElement("div",{className:"question"},null!==l&&r.a.createElement("button",{className:"danger",type:"button"},l," ",r.a.createElement("span",{onClick:function(){return s()}},"X")),r.a.createElement("p",null,"Dont' have an accout? "," "," ",r.a.createElement(o.b,{to:"/register"},"Sign Up"))))},_=a(3),T=a.n(_),x=a(12),D=a(8),N=a.n(D),U=a(32);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var I=function(e,t){var a=t.type,n=t.payload;switch(a){case"GET_GUESTS":return L({},e,{guests:n,error:null});case"ADD_GUEST":return L({},e,{guests:[].concat(Object(U.a)(e.guests),[n])});case"REMOVE_GUEST":return L({},e,{guests:e.guests.filter(function(e){return e._id!==n})});case"EDIT_GUEST":return L({},e,{editGuest:n});case"CLEAR_EDIT":return L({},e,{editGuest:null});case"UPDATE_GUEST":return L({},e,{guests:e.guests.map(function(e){return e._id===n._id?n:e})});case"TOGGLE_GUESTFILTER":return L({},e,{guestFilter:!e.guestFilter});case"SEARCH_GUEST":var r=new RegExp("".concat(n),"gi");return L({},e,{searchGuest:e.guests.filter(function(e){return e.name.match(r)})});case"CLEAR_SEARCH":return L({},e,{searchGuest:null});case"GUESTS_ERROR":return L({},e,{error:n});case"CLEAR_GUESTS":return L({},e,{guestFilter:!1,searchGuest:null,editGuest:null,guests:[],error:null});default:return e}},F=function(e){var t=Object(n.useReducer)(I,{guestFilter:!1,searchGuest:null,editGuest:null,guests:[],error:null}),a=Object(d.a)(t,2),c=a[0],l=a[1],o=function(){var e=Object(x.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("/guests");case 3:t=e.sent,l({type:"GET_GUESTS",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"GUESTS_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(x.a)(T.a.mark(function e(t){var a,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={"Content-Type":"application/json"},e.prev=1,e.next=4,N.a.post("/guests",t,a);case 4:n=e.sent,l({type:"ADD_GUEST",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l({type:"GUESTS_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(x.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("/guests/".concat(t));case 3:l({type:"REMOVE_GUEST",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l({type:"GUESTS_ERROR",payload:e.t0.response.msg});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(x.a)(T.a.mark(function e(t){var a,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,N.a.put("/guests/".concat(t._id),t,a);case 4:n=e.sent,l({type:"UPDATE_GUEST",payload:n.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l({type:"GUESTS_ERROR",payload:e.t0.response});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(i.Provider,{value:{guests:c.guests,guestFilter:c.guestFilter,searchGuest:c.searchGuest,editGuest:c.editGuest,error:c.error,loading:c.loading,addGuest:s,removeGuest:u,edit_Guest:function(e){l({type:"EDIT_GUEST",payload:e})},clearEdit:function(){l({type:"CLEAR_EDIT"})},update_Guest:p,toggleGuestFilter:function(){l({type:"TOGGLE_GUESTFILTER"})},search_Guest:function(e){l({type:"SEARCH_GUEST",payload:e})},clearSearchGuest:function(){l({type:"CLEAR_SEARCH"})},getGuests:o,clearGuests:function(){l({type:"CLEAR_GUESTS"})}}},e.children)};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var W=function(e,t){var a=t.type,n=t.payload;switch(a){case"USER_LOADED":return H({},e,{isAuthencated:!0,user:n,loading:!1,error:null});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),H({},e,{},n,{isAuthencated:!0,loading:!1,error:null});case"REGISTER_FAIL":case"LOGIN_FAIL":case"AUTH_ERROR":case"LOGOUT":return localStorage.removeItem("token"),H({},e,{token:null,isAuthencated:null,user:null,loading:!1,error:n});case"CLEAR_ERRORS":return H({},e,{error:null});default:return e}},M=function(e){e?N.a.defaults.headers.common["x-auth-token"]=e:delete N.a.defaults.headers.common["x-auth-token"]},V=function(e){var t={token:localStorage.getItem("token"),isAuthencated:null,loading:!0,user:null,error:null},a=Object(n.useReducer)(W,t),c=Object(d.a)(a,2),l=c[0],o=c[1],s=function(){var e=Object(x.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&M(localStorage.token),e.prev=1,e.next=4,N.a.get("/auth");case 4:t=e.sent,o({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(x.a)(T.a.mark(function e(t){var a,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={header:{"Content-Type":"application/json"}},e.prev=1,e.next=4,N.a.post("/register",t,a);case 4:n=e.sent,o({type:"REGISTER_SUCCESS",payload:n.data}),s(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"REGISTER_FAIL",payload:e.t0.response.data.error});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(x.a)(T.a.mark(function e(t){var a,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={header:{"Content-Type":"application/json"}},e.prev=1,e.next=4,N.a.post("/auth",t,a);case 4:n=e.sent,o({type:"LOGIN_SUCCESS",payload:n.data}),s(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"LOGIN_FAIL",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(u.Provider,{value:{token:l.token,isAuthencated:l.isAuthencated,user:l.user,error:l.error,loading:l.loading,register:i,login:p,loadUser:s,logout:function(){return o({type:"LOGOUT"})},clearErrors:function(){return o({type:"CLEAR_ERRORS"})},setError:function(e){o({type:"REGISTER_FAIL",payload:[{msg:e}]})}}},e.children)},B=a(33),J=function(e){var t=e.component,a=Object(B.a)(e,["component"]),c=Object(n.useContext)(u),l=c.isAuthencated,o=c.loading;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return l||o?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))};localStorage.token&&M(localStorage.token);var X=function(){return r.a.createElement(V,null,r.a.createElement(F,null,r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(m,null),r.a.createElement(s.d,null,r.a.createElement(J,{exact:!0,path:"/",component:C}),r.a.createElement(s.b,{exact:!0,path:"/register",component:k}),r.a.createElement(s.b,{exact:!0,path:"/login",component:P}))))))};l.a.render(r.a.createElement(X,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.f57d4d4f.chunk.js.map